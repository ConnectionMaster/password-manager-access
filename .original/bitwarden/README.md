Bitwarden C# API
================

**This is unofficial Bitwarden API.**

The library implements a read-only access to the Bitwarden online password
vault. As with the other libraries from this family the interface is
intentionally very simple. It's just one call to `Vault.Open`. Because of the
complexity that 2FA (second factor authentication) adds the login is
interactive and requires user input. The application must implement the `Ui`
interface to provide that. To store authentication tokens betweens sessions
the application must also implement the `ISecureStorage` interface. This makes
the "remember me" feature possible.

**UI**

The `Ui` interface describes the process of interaction with the user. For
simple 2FA methods like Google Authenticator or compatible TOTP application
the library will require the second factor code via
`Ui.ProvideGoogleAuthPasscode`. Similarly for email or YubiKey options there's
also a dedicated interface method.

Please not that the email option only works when it's the only 2FA method
enabled. In this case the server send the email right away. When multiple 2FA
options are enabled an additional request to the server is needed and that is
not implemented.

*Duo*

Another option that is supported is Duo Security. Duo support is what makes
the `Ui` so complex. The Duo UI flow is quite different from the simple 2FA
methods mentioned above.

First the list of the available devices and their supported factors is passed
to the application via `Ui.ChooseDuoFactor`. The application should allow the
user to chose which one he/she wants to use. At this point it's also possible
to decide if "remember me" should be enabled.

Depending on the factor chosen different things might happen. When `Push` is
selected the server will send a push message to the mobile device and the user
has to respond. In this case the library will simply poll the server and
update the UI with any messages that the server might provide. `Call` factor
is similar to `Push`, only the user would have to respond to a phone call.

`SendPasscodesBySms` factor behaves differently. This will immediately trigger
an SMS to be sent to the mobile device. And after that the application will be
asked to proved a passcode via `Ui.ProvideDuoPasscode`. The `Passcode` factor
is similar only it assumes the passcodes are already available to the user and
no SMS is sent. This is the factor to use with OTP passcodes from the Duo
mobile app.

`Ui.UpdateDuoStatus` is used to communicate any messages from the server to
the application to display to the user. They are sometimes important, like
"this passcode has been used already, get a new one". The messages all have a
status associated with them. It could be `Success`, `Error` or `Info`. This
could be used to apply different styles to the displayed message, to make it
obvious if an error occurred for example.

When the user used an incorrect passcode the library will try to follow all
the steps again. So it's possible to retry. In case of a network or some other
irrecoverable error, the process stops with an exception.

`Ui.Close` is called after the interaction with the UI is finished. This is
only called when the login is finished successfully and no exceptions are
thrown. It's possible to close or hide the UI at this point while the library
keeps downloading, decrypting and parsing the vault. It's possible to do
nothing and just wait a bit for the library to return and then close the UI.

`Example.Program.TextUi` provides a simple implementation example.

**Secure Storage**

An implementation of `ISecureStorage` interface is used to store a "remember
me" token between sessions. It's used to bypass the second factor steps on the
subsequent logins. This token is generated by the server and it has to be
stored by the application.

See sample implementation is in `Example.Program.PlainStorage` for reference.

A quick example of accessing your account information:

```csharp
using Bitwarden;

var vault = Vault.Open(username, password, deviceId, ui, storage);
foreach (var i in vault.Accounts)
    Console.WriteLine("{0}: {1}, {2}", i.Name, i.Username, i.Password);
```

For more detail please refer to the provided complete [example program][example].

License
-------

The library is released under [the MIT
license](http://www.opensource.org/licenses/mit-license.php).

[example]: example/Program.cs
