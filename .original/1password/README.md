1Password C# API
================

**This is unofficial 1Password API.**

This library provides access to the [1Password online vault][1password]. This
library does not decode any locally stored keychains, only what's available
online.

This library provides a very high level mode of operations. It simply
downloads all the available vaults, parses and decrypts them. Only web
accounts are supported. The API is relatively simple and should not be
difficult to use. Simply call `OnePassword.Client.OpenVaults` with a few
parameters and inspect the output. Here's a quick example (for the complete
example program please to refer to `example/Program.cs`):

```csharp
using OnePassword;

var vaults = Client.OpenAllVaults(username, password, accountKey, uuid, domain, ui, storage);
foreach (var vault in vaults)
{
    Console.WriteLine("{0} {1} {2}", vault.Id, vault.Name, vault.Description);
    for (int i = 0; i < vault.Accounts.Length; ++i)
    {
        var account = vault.Accounts[i];
        Console.WriteLine("  - {0}: {1} {2} {3} {4} {5} {6}",
                          i + 1,
                          account.Id,
                          account.Name,
                          account.Username,
                          account.Password,
                          account.Url,
                          account.Note);
    }
}
```

`username`, `password` and the `accountKey` are, obviously, your credentials
to the online vault.

`uuid` is a device ID from which the access is made. This
ID should be unique for each new client. A new ID will be registered with the
server and it should be reused on subsequent calls. It's possible to use a new
ID every time but this will pollute the [list of trusted devices][profile] on
the server. To generate a new uuid please use provided
`Client.GenerateRandomUuid` funciton.

`domain` or `region` (in a differrent
overload of `OpenAllVaults`) specifies the API domain, it could be `Global`
(`my.1password.com`), `Europe` (`my.1password.eu`) or `Canada`
(`my.1password.ca`).

Because of the complexity that 2FA (second factor authentication) adds, the
login is interactive and requires user input. The application must implement
the `Ui` interface to provide that. To store authentication tokens betweens
sessions the application must also implement the `ISecureStorage` interface.
This makes the "remember me" feature possible.

**UI**

The `Ui` interface describes the process of interaction with the user. For
simple 2FA methods like Google Authenticator or compatible TOTP application
the library will require the second factor code via
`Ui.ProvideGoogleAuthPasscode`.

`Example.Program.TextUi` provides a simple implementation example.


**Secure Storage**

An implementation of `ISecureStorage` interface is used to store a "remember
me" token between sessions. It's used to bypass the second factor steps on the
subsequent logins. This token is generated by the server and it has to be
stored by the application.

`Example.Program.PlainStorage` provides a simple implementation example.


Notes
-----

The library alters some global parameters that might affect the application.
Please take a look at the static constructor of the `HttpClient` class.
`ServicePointManager.SecurityProtocol` is changed to support SSL3 and TLS 1.0
through 1.2. Otherwise 1password.com refuses to open a secure connection.


License
-------

The library is released under [the MIT
license](http://www.opensource.org/licenses/mit-license.php).


[1password]: https://my.1password.com/signin
[profile]: https://my.1password.com/profile
